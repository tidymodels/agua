<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="Getting started with h2o and tidymodels">
<title>Introduction to agua • agua</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_Pro-0.4.5/font.css" rel="stylesheet">
<link href="../deps/Source_Code_Pro-0.4.5/font.css" rel="stylesheet">
<!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Introduction to agua">
<meta property="og:description" content="Getting started with h2o and tidymodels">
<meta property="og:image" content="https://agua.tidymodels.org/logo.svg">
<meta name="robots" content="noindex">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><script defer data-domain="agua.tidymodels.org,all.tidymodels.org" src="https://plausible.io/js/plausible.js"></script>
</head>
<body>
    <a href="#container" class="visually-hidden-focusable">Skip to content</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-none"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">agua</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">0.1.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item">
  <a class="nav-link" href="../articles/agua.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/auto_ml.html">Automatic machine learning</a>
    <a class="dropdown-item" href="../articles/tune.html">Model tuning</a>
    <a class="dropdown-item" href="../articles/parallel.html">Parallel processing with agua and h2o</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/tidymodels/agua/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article" id="container">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Introduction to agua</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/tidymodels/agua/blob/HEAD/vignettes/agua.Rmd" class="external-link"><code>vignettes/agua.Rmd</code></a></small>
      <div class="d-none name"><code>agua.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>The <code>agua</code> package provides tidymodels interface to the <a href="https://h2o.ai/" class="external-link">H2O</a> platform and the <a href="https://docs.h2o.ai/h2o/latest-stable/h2o-r/docs/index.html" class="external-link">h2o</a>
R package. It has two main components</p>
<ul>
<li>
<p>new parsnip engine <code>'h2o'</code> for the following
models:</p>
<ul>
<li><p><code><a href="https://parsnip.tidymodels.org/reference/linear_reg.html" class="external-link">linear_reg()</a></code>, <code><a href="https://parsnip.tidymodels.org/reference/logistic_reg.html" class="external-link">logistic_reg()</a></code>,
<code><a href="https://parsnip.tidymodels.org/reference/poisson_reg.html" class="external-link">poisson_reg()</a></code>, <code><a href="https://parsnip.tidymodels.org/reference/multinom_reg.html" class="external-link">multinom_reg()</a></code>: All fit
penalized generalized linear models. If the model parameters
<code>penalty</code> and <code>mixture</code> are not specified, h2o
will internally search for the optimal regularization settings.</p></li>
<li><p><code><a href="https://parsnip.tidymodels.org/reference/boost_tree.html" class="external-link">boost_tree()</a></code>: . Fits boosted trees via xgboost. Use
<code><a href="https://rdrr.io/pkg/h2o/man/h2o.xgboost.available.html" class="external-link">h2o::h2o.xgboost.available()</a></code> to see if h2o’s xgboost is
supported on your machine. For classical gradient boosting, use the
<code>'h2o_gbm'</code> engine.</p></li>
<li><p><code><a href="https://parsnip.tidymodels.org/reference/rand_forest.html" class="external-link">rand_forest()</a></code>: Random forest models.</p></li>
<li><p><code><a href="https://parsnip.tidymodels.org/reference/naive_Bayes.html" class="external-link">naive_Bayes()</a></code>: Naive Bayes models.</p></li>
<li><p><code><a href="https://parsnip.tidymodels.org/reference/rule_fit.html" class="external-link">rule_fit()</a></code>: RuleFit models.</p></li>
<li><p><code><a href="https://parsnip.tidymodels.org/reference/mlp.html" class="external-link">mlp()</a></code>: Multi-layer feedforward neural
networks.</p></li>
<li><p><code><a href="https://parsnip.tidymodels.org/reference/auto_ml.html" class="external-link">auto_ml()</a></code>: Automatic machine learning.</p></li>
</ul>
</li>
<li><p>Infrastructure for the tune package, see <a href="https://agua.tidymodels.org/articles/tune.html">Tuning with
agua</a> for more details.</p></li>
</ul>
<p>All supported models can accept an additional engine argument
<code>validation</code>, which is a number between 0 and 1 specifying
the <em>proportion</em> of data reserved as validation set. This can
used by h2o for performance assessment and potential early stopping.</p>
</div>
<div class="section level2">
<h2 id="fitting-models-with-the-h2o-engine">Fitting models with the <code>'h2o'</code> engine<a class="anchor" aria-label="anchor" href="#fitting-models-with-the-h2o-engine"></a>
</h2>
<p>As an example, we will fit a random forest model to the
<code>concrete</code> data. This will be a regression model with the
outcome being the compressive strength of concrete mixtures.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidymodels.tidymodels.org" class="external-link">tidymodels</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://agua.tidymodels.org/">agua</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://tidymodels.tidymodels.org/reference/tidymodels_prefer.html" class="external-link">tidymodels_prefer</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme_get.html" class="external-link">theme_set</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_bw</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># start h2o server</span></span>
<span><span class="fu"><a href="../reference/h2o-server.html">h2o_start</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">concrete</span>, package <span class="op">=</span> <span class="st">"modeldata"</span><span class="op">)</span></span>
<span><span class="va">concrete</span> <span class="op">&lt;-</span></span>
<span>  <span class="va">concrete</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">group_by</span><span class="op">(</span><span class="fu">across</span><span class="op">(</span><span class="op">-</span><span class="va">compressive_strength</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">summarize</span><span class="op">(</span>compressive_strength <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">compressive_strength</span><span class="op">)</span>,</span>
<span>            .groups <span class="op">=</span> <span class="st">"drop"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">concrete</span></span>
<span><span class="co">#&gt; # A tibble: 992 × 9</span></span>
<span><span class="co">#&gt;    cement blast_furn…¹ fly_ash water super…² coars…³ fine_…⁴   age compr…⁵</span></span>
<span><span class="co">#&gt;     &lt;dbl&gt;        &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt; &lt;int&gt;   &lt;dbl&gt;</span></span>
<span><span class="co">#&gt;  1   102          153        0  192        0    887     942      3    4.57</span></span>
<span><span class="co">#&gt;  2   102          153        0  192        0    887     942      7    7.68</span></span>
<span><span class="co">#&gt;  3   102          153        0  192        0    887     942     28   17.3 </span></span>
<span><span class="co">#&gt;  4   102          153        0  192        0    887     942     90   25.5 </span></span>
<span><span class="co">#&gt;  5   108.         162.       0  204.       0    938.    849      3    2.33</span></span>
<span><span class="co">#&gt;  6   108.         162.       0  204.       0    938.    849      7    7.72</span></span>
<span><span class="co">#&gt;  7   108.         162.       0  204.       0    938.    849     28   20.6 </span></span>
<span><span class="co">#&gt;  8   108.         162.       0  204.       0    938.    849     90   29.2 </span></span>
<span><span class="co">#&gt;  9   116          173        0  192        0    910.    892.     3    6.28</span></span>
<span><span class="co">#&gt; 10   116          173        0  192        0    910.    892.     7   10.1 </span></span>
<span><span class="co">#&gt; # … with 982 more rows, and abbreviated variable names</span></span>
<span><span class="co">#&gt; #   ¹​blast_furnace_slag, ²​superplasticizer, ³​coarse_aggregate,</span></span>
<span><span class="co">#&gt; #   ⁴​fine_aggregate, ⁵​compressive_strength</span></span></code></pre></div>
<p>Note that we need to call <code><a href="../reference/h2o-server.html">h2o_start()</a></code> or
<code><a href="https://rdrr.io/pkg/h2o/man/h2o.init.html" class="external-link">h2o::h2o.init()</a></code> to start the h2o instance. The h2o server
handles computations related to estimation and prediction, and passes
the results back to R. agua takes care of data conversion and error
handling, it also tries to store as least objects on the server as
possible. The h2o server will automatically terminate once R session is
closed. You can use <code><a href="https://rdrr.io/pkg/h2o/man/h2o.removeAll.html" class="external-link">h2o::h2o.removeAll()</a></code> to remove all
server-side objects and <code><a href="https://rdrr.io/pkg/h2o/man/h2o.shutdown.html" class="external-link">h2o::h2o.shutdown()</a></code> to manually
stop the server.</p>
<p>The rest of the syntax of model fitting and prediction are identical
to the usage of any other engine in tidymodels.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">1501</span><span class="op">)</span></span>
<span><span class="va">concrete_split</span> <span class="op">&lt;-</span> <span class="fu">initial_split</span><span class="op">(</span><span class="va">concrete</span>, strata <span class="op">=</span> <span class="va">compressive_strength</span><span class="op">)</span></span>
<span><span class="va">concrete_train</span> <span class="op">&lt;-</span> <span class="fu">training</span><span class="op">(</span><span class="va">concrete_split</span><span class="op">)</span></span>
<span><span class="va">concrete_test</span>  <span class="op">&lt;-</span> <span class="fu">testing</span><span class="op">(</span><span class="va">concrete_split</span><span class="op">)</span></span>
<span></span>
<span><span class="va">rf_spec</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://parsnip.tidymodels.org/reference/rand_forest.html" class="external-link">rand_forest</a></span><span class="op">(</span>mtry <span class="op">=</span> <span class="fl">3</span>, trees <span class="op">=</span> <span class="fl">500</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://parsnip.tidymodels.org/reference/set_engine.html" class="external-link">set_engine</a></span><span class="op">(</span><span class="st">"h2o"</span>, histogram_type <span class="op">=</span> <span class="st">"Random"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://parsnip.tidymodels.org/reference/set_args.html" class="external-link">set_mode</a></span><span class="op">(</span><span class="st">"regression"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">normalized_rec</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu">recipe</span><span class="op">(</span><span class="va">compressive_strength</span> <span class="op">~</span> <span class="va">.</span>, data <span class="op">=</span> <span class="va">concrete_train</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">step_normalize</span><span class="op">(</span><span class="fu">all_predictors</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">rf_wflow</span> <span class="op">&lt;-</span> <span class="fu">workflow</span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu">add_model</span><span class="op">(</span><span class="va">rf_spec</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">add_recipe</span><span class="op">(</span><span class="va">normalized_rec</span><span class="op">)</span></span>
<span>  </span>
<span><span class="va">rf_fit</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://generics.r-lib.org/reference/fit.html" class="external-link">fit</a></span><span class="op">(</span><span class="va">rf_wflow</span>, data <span class="op">=</span> <span class="va">concrete_train</span><span class="op">)</span></span>
<span><span class="va">rf_fit</span></span>
<span><span class="co">#&gt; ══ Workflow [trained] ════════════════════════════════════════════════════</span></span>
<span><span class="co">#&gt; Preprocessor: Recipe</span></span>
<span><span class="co">#&gt; Model: rand_forest()</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Preprocessor ──────────────────────────────────────────────────────────</span></span>
<span><span class="co">#&gt; 1 Recipe Step</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; • step_normalize()</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── Model ─────────────────────────────────────────────────────────────────</span></span>
<span><span class="co">#&gt; Model Details:</span></span>
<span><span class="co">#&gt; ==============</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; H2ORegressionModel: drf</span></span>
<span><span class="co">#&gt; Model ID:  DRF_model_R_1665503649643_6 </span></span>
<span><span class="co">#&gt; Model Summary: </span></span>
<span><span class="co">#&gt;   number_of_trees number_of_internal_trees model_size_in_bytes min_depth</span></span>
<span><span class="co">#&gt; 1             500                      500             2652880        15</span></span>
<span><span class="co">#&gt;   max_depth mean_depth min_leaves max_leaves mean_leaves</span></span>
<span><span class="co">#&gt; 1        20   17.97600        375        450   417.48000</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; H2ORegressionMetrics: drf</span></span>
<span><span class="co">#&gt; ** Reported on training data. **</span></span>
<span><span class="co">#&gt; ** Metrics reported on Out-Of-Bag training samples **</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; MSE:  26.5</span></span>
<span><span class="co">#&gt; RMSE:  5.15</span></span>
<span><span class="co">#&gt; MAE:  3.7</span></span>
<span><span class="co">#&gt; RMSLE:  0.169</span></span>
<span><span class="co">#&gt; Mean Residual Deviance :  26.5</span></span></code></pre></div>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span><span class="va">rf_fit</span>, new_data <span class="op">=</span> <span class="va">concrete_test</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 249 × 1</span></span>
<span><span class="co">#&gt;    .pred</span></span>
<span><span class="co">#&gt;    &lt;dbl&gt;</span></span>
<span><span class="co">#&gt;  1  6.42</span></span>
<span><span class="co">#&gt;  2  9.54</span></span>
<span><span class="co">#&gt;  3  9.20</span></span>
<span><span class="co">#&gt;  4 25.5 </span></span>
<span><span class="co">#&gt;  5  6.60</span></span>
<span><span class="co">#&gt;  6 28.6 </span></span>
<span><span class="co">#&gt;  7 10.0 </span></span>
<span><span class="co">#&gt;  8 31.9 </span></span>
<span><span class="co">#&gt;  9 12.1 </span></span>
<span><span class="co">#&gt; 10 11.4 </span></span>
<span><span class="co">#&gt; # … with 239 more rows</span></span></code></pre></div>
<p>Here, we specify the engine argument
<code>histogram_type = "Random"</code> to use the extremely randomized
trees (XRT) algorithm. For all available engine arguments, consult the
engine specific help page for “h2o” of that model. For instance, the h2o
link in the help page of <code><a href="https://parsnip.tidymodels.org/reference/rand_forest.html" class="external-link">rand_forest()</a></code> shows that it uses
<code><a href="https://rdrr.io/pkg/h2o/man/h2o.randomForest.html" class="external-link">h2o::h2o.randomForest()</a></code>, whose arguments can be passed in
as engine arguments in <code><a href="https://parsnip.tidymodels.org/reference/set_engine.html" class="external-link">set_engine()</a></code>.</p>
<p>You can also use <code>fit_resamples()</code> with h2o models.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">concrete_folds</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu">vfold_cv</span><span class="op">(</span><span class="va">concrete_train</span>, strata <span class="op">=</span> <span class="va">compressive_strength</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">fit_resamples</span><span class="op">(</span><span class="va">rf_wflow</span>, resamples <span class="op">=</span> <span class="va">concrete_folds</span><span class="op">)</span></span>
<span><span class="co">#&gt; # Resampling results</span></span>
<span><span class="co">#&gt; # 10-fold cross-validation using stratification </span></span>
<span><span class="co">#&gt; # A tibble: 10 × 4</span></span>
<span><span class="co">#&gt;    splits           id     .metrics         .notes          </span></span>
<span><span class="co">#&gt;    &lt;list&gt;           &lt;chr&gt;  &lt;list&gt;           &lt;list&gt;          </span></span>
<span><span class="co">#&gt;  1 &lt;split [667/76]&gt; Fold01 &lt;tibble [2 × 4]&gt; &lt;tibble [0 × 3]&gt;</span></span>
<span><span class="co">#&gt;  2 &lt;split [667/76]&gt; Fold02 &lt;tibble [2 × 4]&gt; &lt;tibble [0 × 3]&gt;</span></span>
<span><span class="co">#&gt;  3 &lt;split [667/76]&gt; Fold03 &lt;tibble [2 × 4]&gt; &lt;tibble [0 × 3]&gt;</span></span>
<span><span class="co">#&gt;  4 &lt;split [667/76]&gt; Fold04 &lt;tibble [2 × 4]&gt; &lt;tibble [0 × 3]&gt;</span></span>
<span><span class="co">#&gt;  5 &lt;split [667/76]&gt; Fold05 &lt;tibble [2 × 4]&gt; &lt;tibble [0 × 3]&gt;</span></span>
<span><span class="co">#&gt;  6 &lt;split [668/75]&gt; Fold06 &lt;tibble [2 × 4]&gt; &lt;tibble [0 × 3]&gt;</span></span>
<span><span class="co">#&gt;  7 &lt;split [671/72]&gt; Fold07 &lt;tibble [2 × 4]&gt; &lt;tibble [0 × 3]&gt;</span></span>
<span><span class="co">#&gt;  8 &lt;split [671/72]&gt; Fold08 &lt;tibble [2 × 4]&gt; &lt;tibble [0 × 3]&gt;</span></span>
<span><span class="co">#&gt;  9 &lt;split [671/72]&gt; Fold09 &lt;tibble [2 × 4]&gt; &lt;tibble [0 × 3]&gt;</span></span>
<span><span class="co">#&gt; 10 &lt;split [671/72]&gt; Fold10 &lt;tibble [2 × 4]&gt; &lt;tibble [0 × 3]&gt;</span></span></code></pre></div>
<p>Variable importance scores can be visualized by the vip package.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/koalaverse/vip/" class="external-link">vip</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">rf_fit</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://hardhat.tidymodels.org/reference/hardhat-extract.html" class="external-link">extract_fit_parsnip</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/vip/man/vip.html" class="external-link">vip</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="../reference/figures/vip.png" width="95%"></p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



   </div>
  <footer><div class="container">
  <div class="pkgdown-footer-left">
  <p></p>
<p>Developed by <a href="https://github.com/topepo" class="external-link">Max Kuhn</a>, Qiushi Yan, Steven Pawley.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

  </div></footer>
</body>
</html>
